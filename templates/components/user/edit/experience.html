{% block content %}
    <div id="add-experience">
        <hr>
        <div class="mb-3 row">
            <div class="col-sm-10"><h4 class="mb-2">Experience</h4></div>
            <div class="col-sm-2">
                <button id="btn-add-experience" class="btn btn-outline-primary" style="float: right;" type="button">
                    <i class="fa-solid fa-plus"></i></a>
                </button>
            </div>
        </div>
        {% for experience in context %}
            <div class="mb-3 row">
                <div class="col-sm-5">
                    <input type="text" class="form-control" name="position-{{loop.index0}}" placeholder="Position" value="{{experience.position}}"/>
                </div>
                <div class="col-sm-5">
                    <input type="text" class="form-control" name="organization-{{loop.index0}}" placeholder="Organization" value="{{experience.organization}}"/>
                </div>
                <div class="col-sm-2">
                    <input type="text" class="form-control" name="workperiod-{{loop.index0}}" placeholder="Work period" value="{{experience.work_period}}"/>
                </div>
            </div>
        {% endfor %}
    </div>
    <script>
        $(document).ready(function () {
            /* --------------------- */
            /* ----- CONSTANTS ----- */
            /* --------------------- */
            const experience_obj = `
                <div class="mb-3 row">
                    <div class="col-sm-5">
                        <input type="text" class="form-control" name="POSITION" placeholder="Position"/>
                    </div>
                    <div class="col-sm-5">
                        <input type="text" class="form-control" name="ORGANIZATION" placeholder="Organization"/>
                    </div>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" name="WORKPERIOD" placeholder="Work period"/>
                    </div>
                </div>
            `

            /* --------------------- */
            /* ----- LISTENERS ----- */
            /* --------------------- */
            $('button#btn-add-experience').bind('click', function() {
                let experience_count = $('div#add-experience div.row').length - 1;
                $('div#add-experience').append(
                    experience_obj
                        .replace('POSITION', `position-${experience_count}`)
                        .replace('ORGANIZATION', `organization-${experience_count}`)
                        .replace('WORKPERIOD', `workperiod-${experience_count}`)
                );
            });
        });
    </script>
{% endblock %}